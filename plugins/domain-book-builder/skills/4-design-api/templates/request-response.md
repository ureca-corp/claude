# Request/Response 템플릿

## API 명세 구조

### 전체 구조

```markdown
# {domain} API 명세

> 생성일: {날짜}
> Phase: 4 (API Designer)
> 상태: ✅ 완료

---

## API 목록

| 번호 | API 이름 | 설명 | 복잡도 |
|------|----------|------|--------|
| 1 | ... | ... | 단순 |
| 2 | ... | ... | 보통 |

---

## 1. {API 이름}

### Request (요청)

| 필드명 | 타입 | 필수 | 설명 | 예시 | 검증 규칙 |
|--------|------|------|------|------|-----------|
| ... | ... | ... | ... | ... | ... |

### Response (응답)

#### 성공 (200)

| 필드명 | 타입 | 설명 | 예시 |
|--------|------|------|------|
| ... | ... | ... | ... |

#### 오류

| 상태 | 조건 | 메시지 | 필드 예시 |
|------|------|--------|-----------|
| ... | ... | ... | ... |

### 수도코드 (복잡한 로직만)

\`\`\`
...
\`\`\`
```

---

## Request 템플릿

### 기본 구조

```markdown
### Request (요청)

| 필드명 | 타입 | 필수 | 설명 | 예시 | 검증 규칙 |
|--------|------|------|------|------|-----------|
| {fieldName} | {타입} | O/X | {역할 설명} | {실제 값} | {모든 제약} |
```

### 타입 표현

| 영어 | 한글 | 예시 |
|------|------|------|
| string | 문자열 | "hello" |
| number | 숫자 | 123 |
| boolean | 불린 | true |
| datetime | 날짜시간 | "2026-01-28T10:30:00Z" |
| array | 배열 | ["a", "b", "c"] |
| object | 객체 | {"key": "value"} |

### 검증 규칙 표현

| 규칙 유형 | 표현 |
|-----------|------|
| 형식 | 이메일 형식, URL 형식 |
| 길이 | 최소 N자, 최대 N자 |
| 범위 | N 이상, N 이하 |
| 선택 | 'A', 'B' 중 하나 |
| 유일성 | 중복 불가 |
| 참조 | 존재하는 X여야 함 |

### 예시: 회원가입

```markdown
### Request (요청)

| 필드명 | 타입 | 필수 | 설명 | 예시 | 검증 규칙 |
|--------|------|------|------|------|-----------|
| email | 문자열 | O | 로그인용 이메일 주소 | user@example.com | 이메일 형식, 중복 불가, 최대 255자 |
| displayName | 문자열 | O | 사용자 닉네임 | 여행러버 | 최소 1자, 최대 50자 |
| profileImage | 문자열 | X | 프로필 사진 URL | https://example.com/photo.jpg | URL 형식 |
| preferredLanguage | 문자열 | X | 선호 언어 | ko | 'ko' 또는 'en' (기본값: 'en') |
```

---

## Response 템플릿

### 성공 응답

```markdown
#### 성공 (200)

| 필드명 | 타입 | 설명 | 예시 |
|--------|------|------|------|
| {fieldName} | {타입} | {역할 설명} | {실제 값} |
```

### 예시: 회원가입 성공

```markdown
#### 성공 (200)

| 필드명 | 타입 | 설명 | 예시 |
|--------|------|------|------|
| id | 문자열 | 생성된 사용자 ID | u_123abc |
| email | 문자열 | 이메일 주소 | user@example.com |
| displayName | 문자열 | 표시 이름 | 여행러버 |
| profileImage | 문자열 | 프로필 사진 URL | https://example.com/photo.jpg |
| preferredLanguage | 문자열 | 선호 언어 | ko |
| createdAt | 날짜시간 | 가입 시각 | 2026-01-28T10:30:00Z |
```

---

### 오류 응답

```markdown
#### 오류

| 상태 | 조건 | 메시지 | 필드 예시 |
|------|------|--------|-----------|
| {코드} | {오류 발생 조건} | {한글 메시지} | {관련 필드와 값} |
```

### 상태 코드

| 코드 | 의미 | 사용 상황 |
|------|------|-----------|
| 200 | 성공 | 정상 처리 |
| 400 | 잘못된 요청 | 검증 실패, 필수 필드 누락 |
| 401 | 인증 필요 | 로그인 필요 |
| 403 | 권한 없음 | 권한 부족 |
| 404 | 없음 | 리소스 없음 |
| 409 | 충돌 | 중복, 상태 충돌 |
| 500 | 서버 오류 | 내부 오류 |

### 예시: 회원가입 오류

```markdown
#### 오류

| 상태 | 조건 | 메시지 | 필드 예시 |
|------|------|--------|-----------|
| 409 | 이메일 중복 | 이미 가입된 이메일입니다 | {"email": "user@example.com"} |
| 400 | 필드 검증 실패 | 이메일 형식이 올바르지 않습니다 | {"email": "invalid-email"} |
| 400 | 필수 필드 누락 | 필수 필드가 누락되었습니다 | {"displayName": null} |
| 400 | 언어 코드 오류 | 지원하지 않는 언어입니다 | {"preferredLanguage": "fr"} |
```

---

## 복합 타입

### 배열 타입

```markdown
| 필드명 | 타입 | 필수 | 설명 | 예시 | 검증 규칙 |
|--------|------|------|------|------|-----------|
| tags | 문자열 배열 | X | 관심 태그 목록 | ["여행", "음식"] | 최대 10개 |
```

### 객체 타입

```markdown
| 필드명 | 타입 | 필수 | 설명 | 예시 | 검증 규칙 |
|--------|------|------|------|------|-----------|
| address | 주소 객체 | O | 배송지 정보 | (아래 참조) | - |

### 주소 객체

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| street | 문자열 | O | 도로명 |
| city | 문자열 | O | 도시 |
| zipCode | 문자열 | O | 우편번호 |
```

---

## 한글 메시지 작성 원칙

### ✅ 좋은 메시지

- "이미 가입된 이메일입니다"
- "필수 필드가 누락되었습니다"
- "본인만 수정할 수 있습니다"
- "회원 탈퇴가 완료되었습니다"
- "존재하지 않는 사용자입니다"
- "이메일 형식이 올바르지 않습니다"

**특징**:
- 사용자 관점
- 구체적 설명
- 행동 지침 포함 (가능하면)
- 존댓말 사용

### ❌ 나쁜 메시지

- "Email already exists"
- "Invalid request"
- "Forbidden"
- "Success"
- "Validation error"
- "Bad request"

---

## 기술 용어 금지

**절대 사용 금지**:
- HTTP, HTTPS, REST, GraphQL
- GET, POST, PUT, PATCH, DELETE
- JWT, OAuth, Bearer, Token
- JSON, XML, YAML
- Content-Type, Authorization, Accept
- OK, Created, Bad Request, Unauthorized

**대신 사용**:
- "요청", "응답"
- "성공", "오류"
- "인증 정보"
- "데이터", "정보"
- (헤더 언급 안 함)
- "200", "400", "404" (숫자만)

---

## 완전한 API 예시

```markdown
## 1. 회원가입

### Request (요청)

| 필드명 | 타입 | 필수 | 설명 | 예시 | 검증 규칙 |
|--------|------|------|------|------|-----------|
| email | 문자열 | O | 로그인용 이메일 주소 | user@example.com | 이메일 형식, 중복 불가, 최대 255자 |
| displayName | 문자열 | O | 사용자 닉네임 | 여행러버 | 최소 1자, 최대 50자 |
| profileImage | 문자열 | X | 프로필 사진 URL | https://example.com/photo.jpg | URL 형식 |
| preferredLanguage | 문자열 | X | 선호 언어 | ko | 'ko' 또는 'en' (기본값: 'en') |

### Response (응답)

#### 성공 (200)

| 필드명 | 타입 | 설명 | 예시 |
|--------|------|------|------|
| id | 문자열 | 생성된 사용자 ID | u_123abc |
| email | 문자열 | 이메일 주소 | user@example.com |
| displayName | 문자열 | 표시 이름 | 여행러버 |
| profileImage | 문자열 | 프로필 사진 URL | https://example.com/photo.jpg |
| preferredLanguage | 문자열 | 선호 언어 | ko |
| createdAt | 날짜시간 | 가입 시각 | 2026-01-28T10:30:00Z |

#### 오류

| 상태 | 조건 | 메시지 | 필드 예시 |
|------|------|--------|-----------|
| 409 | 이메일 중복 | 이미 가입된 이메일입니다 | {"email": "user@example.com"} |
| 400 | 필드 검증 실패 | 이메일 형식이 올바르지 않습니다 | {"email": "invalid-email"} |
| 400 | 필수 필드 누락 | 필수 필드가 누락되었습니다 | {"displayName": null} |
| 400 | 언어 코드 오류 | 지원하지 않는 언어입니다 | {"preferredLanguage": "fr"} |
```

---

## API 목록 테이블

```markdown
## API 목록

| 번호 | API 이름 | 설명 | 복잡도 |
|------|----------|------|--------|
| 1 | 회원가입 | 새 사용자 생성 | 단순 |
| 2 | 프로필 조회 | 사용자 정보 조회 | 단순 |
| 3 | 프로필 수정 | 사용자 정보 변경 | 단순 |
| 4 | 회원 탈퇴 | 사용자 삭제 (Cascade) | 보통 |
```

### 복잡도 기준

- **단순**: CRUD, 검증만
- **보통**: Cascade, 다단계 검증, 조건부 로직
- **복잡**: 상태 전이, 계산 로직, 외부 API 호출
