---
name: model-domain
description: ìœ ë¹„ì¿¼í„°ìŠ¤ ì–¸ì–´ ëª…ì„¸ ì‘ì„± - ì„œìˆ í˜• ë„ë©”ì¸ ëª¨ë¸ (ERD ëŒ€ì²´)
user-invocable: false
---

# Skill: Model Domain

## ëª©ì 

ë„ë©”ì¸ì˜ **ìœ ë¹„ì¿¼í„°ìŠ¤ ì–¸ì–´**ë¥¼ ì •ì˜í•˜ê³  ì„œìˆ í˜• ëª…ì„¸ë¡œ ì‘ì„±

**ì² í•™**: "ERD ê·¸ë¦¬ê¸° ë§ê³ , ë§ë¡œ ì„¤ëª…í•˜ê¸°"

---

## ì…ë ¥

- ë„ë©”ì¸ ì´ë¦„ (ì˜ˆ: "users")
- Phase 2 ê²°ê³¼ (SESSION.mdì˜ ì™„ì „í•œ ë„ë©”ì¸ ì •ì˜)

---

## ì¶œë ¥

- `ai-context/domain-books/{domain}/domain-model.md`
- ìš©ì–´ ì •ì˜ + ê´€ê³„ ê·œì¹™ + ì œì•½ ì¡°ê±´ + ìƒëª…ì£¼ê¸°

---

## ìœ ë¹„ì¿¼í„°ìŠ¤ ì–¸ì–´ë€?

**í•´ë‹¹ ë„ë©”ì¸ ì „ìš©ì´ë©´ì„œ ê°œë°œìê°€ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” ì „ìš© ì–¸ì–´**

### âŒ ì˜ëª»ëœ ì ‘ê·¼ (ERD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚â”€â”€â”€1:Nâ”€â”€â”‚ Translation  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âœ… ì˜¬ë°”ë¥¸ ì ‘ê·¼ (ìœ ë¹„ì¿¼í„°ìŠ¤ ì–¸ì–´)

```
"ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ ê°œì˜ ë²ˆì—­ ê¸°ë¡ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤."
"ë²ˆì—­ ê¸°ë¡ì€ ë°˜ë“œì‹œ í•œ ëª…ì˜ ì‚¬ìš©ìì—ê²Œ ì†í•œë‹¤."
```

---

## ì‚¬ìš© ë°©ë²•

### 1. ìš©ì–´ ì¶”ì¶œ

```python
from skills.model_domain import extract_terms

terms = extract_terms(
    session_data=read(".claude/SESSION.md"),
    domain="users"
)

# ê²°ê³¼:
# [
#     {"term": "ì‚¬ìš©ì (User)", "definition": "ì•±ì„ ì‚¬ìš©í•˜ëŠ” ê°œì¸", "example": "í™ê¸¸ë™"},
#     {"term": "ì‹ë³„ì (ID)", "definition": "ì‚¬ìš©ìë¥¼ ê³ ìœ í•˜ê²Œ êµ¬ë¶„í•˜ëŠ” ê°’", "example": "u_123abc"},
#     {"term": "ì´ë©”ì¼ (Email)", "definition": "ë¡œê·¸ì¸ ë° ì—°ë½ìš© ì´ë©”ì¼ ì£¼ì†Œ", "example": "user@example.com"},
#     ...
# ]
```

### 2. ê´€ê³„ ê·œì¹™ ìƒì„±

```python
from skills.model_domain import generate_relationship_rules

rules = generate_relationship_rules(
    domain="users",
    session_data=read(".claude/SESSION.md")
)

# ê²°ê³¼:
# [
#     {
#         "rule_number": 1,
#         "statement": "ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ ê°œì˜ ë²ˆì—­ ê¸°ë¡ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.",
#         "details": "í•œ ì‚¬ìš©ìê°€ 0ê°œ ì´ìƒì˜ ë²ˆì—­ì„ ìš”ì²­í•  ìˆ˜ ìˆìŒ",
#         "example": "í™ê¸¸ë™ ì‚¬ìš©ìëŠ” 10ê°œì˜ ë²ˆì—­ ê¸°ë¡ì„ ê°€ì§€ê³  ìˆë‹¤"
#     },
#     ...
# ]
```

### 3. ì œì•½ ì¡°ê±´ ì¶”ì¶œ

```python
from skills.model_domain import extract_constraints

constraints = extract_constraints(
    domain="users",
    session_data=read(".claude/SESSION.md")
)

# ê²°ê³¼:
# [
#     {
#         "number": 1,
#         "constraint": "ì‹ë³„ì (ID)ëŠ” ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ìƒì„±í•œë‹¤.",
#         "reason": "ì‚¬ìš©ìê°€ ì§ì ‘ ì„¤ì •í•  ìˆ˜ ì—†ìŒ"
#     },
#     {
#         "number": 2,
#         "constraint": "ì´ë©”ì¼ (Email)ì€ ì¤‘ë³µë  ìˆ˜ ì—†ë‹¤.",
#         "reason": "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ë¡œëŠ” ê°€ì… ë¶ˆê°€",
#         "example": "user@example.comìœ¼ë¡œ ì´ë¯¸ ê°€ì…ë˜ì–´ ìˆìœ¼ë©´ ë‹¤ì‹œ ê°€ì… ë¶ˆê°€"
#     },
#     ...
# ]
```

### 4. ìƒëª…ì£¼ê¸° ì •ì˜

```python
from skills.model_domain import define_lifecycle

lifecycle = define_lifecycle(
    domain="users",
    session_data=read(".claude/SESSION.md")
)

# ê²°ê³¼:
# {
#     "create": {
#         "steps": ["ìš”ì²­ ì ‘ìˆ˜", "ì¤‘ë³µ í™•ì¸", "í•„ìˆ˜ ì •ë³´ ê²€ì¦", "ì—”í‹°í‹° ìƒì„±", "ìë™ ê°’ ì„¤ì •"],
#         "rules": ["ì„ í˜¸ ì–¸ì–´ ë¯¸ì œê³µ ì‹œ ê¸°ë³¸ê°’ì€ 'ì˜ì–´'"]
#     },
#     "update": {
#         "steps": ["ìˆ˜ì • ìš”ì²­", "ê¶Œí•œ ê²€ì‚¬", "ë³€ê²½ ê°€ëŠ¥ í•„ë“œë§Œ ìˆ˜ì •"],
#         "editable_fields": ["í‘œì‹œ ì´ë¦„", "í”„ë¡œí•„ ì‚¬ì§„", "ì„ í˜¸ ì–¸ì–´"],
#         "readonly_fields": ["ì‹ë³„ì", "ì´ë©”ì¼", "ê°€ì… ì‹œê°"],
#         "rules": ["ë³¸ì¸ë§Œ ìì‹ ì˜ í”„ë¡œí•„ì„ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤"]
#     },
#     "delete": {
#         "steps": ["íƒˆí‡´ ìš”ì²­", "ë³¸ì¸ í™•ì¸", "ì—°ê²° ë°ì´í„° í™•ì¸", "ëª¨ë“  ë°ì´í„° ì‚­ì œ", "ì—”í‹°í‹° ì‚­ì œ"],
#         "rules": ["íƒˆí‡´ëŠ” ì¦‰ì‹œ ì‹¤í–‰ë˜ë©°, ë³µêµ¬ ë¶ˆê°€ëŠ¥í•˜ë‹¤"]
#     }
# }
```

---

## domain-model.md êµ¬ì¡°

```markdown
# {domain} ë„ë©”ì¸ ëª¨ë¸

> ìƒì„±ì¼: {ì˜¤ëŠ˜ ë‚ ì§œ}
> Phase: 3 (Domain Modeler)
> ìƒíƒœ: âœ… ì™„ë£Œ

---

## ğŸ“– ìœ ë¹„ì¿¼í„°ìŠ¤ ì–¸ì–´ (ìš©ì–´ ì •ì˜)

> ì´ ë„ë©”ì¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì „ìš© ìš©ì–´ë“¤

### í•µì‹¬ ìš©ì–´

| ìš©ì–´ | ì •ì˜ | ì˜ˆì‹œ |
|------|------|------|
| ì‚¬ìš©ì (User) | ì•±ì„ ì‚¬ìš©í•˜ëŠ” ê°œì¸ | "í™ê¸¸ë™", "john@example.com" |
| ì‹ë³„ì (ID) | ì‚¬ìš©ìë¥¼ ê³ ìœ í•˜ê²Œ êµ¬ë¶„í•˜ëŠ” ê°’ | "u_123abc" |
| ... | ... | ... |

---

## ğŸ“ ê´€ê³„ ê·œì¹™

> ì´ ë„ë©”ì¸ì˜ ì—”í‹°í‹°ë“¤ì´ ì–´ë–»ê²Œ ì—°ê²°ë˜ëŠ”ì§€ ì„œìˆ í˜•ìœ¼ë¡œ ì •ì˜

### ì‚¬ìš©ìì™€ ë²ˆì—­ ê¸°ë¡

**ê·œì¹™ 1**: ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ ê°œì˜ ë²ˆì—­ ê¸°ë¡ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.
- í•œ ì‚¬ìš©ìê°€ 0ê°œ ì´ìƒì˜ ë²ˆì—­ì„ ìš”ì²­í•  ìˆ˜ ìˆìŒ
- ì˜ˆ: "í™ê¸¸ë™ ì‚¬ìš©ìëŠ” 10ê°œì˜ ë²ˆì—­ ê¸°ë¡ì„ ê°€ì§€ê³  ìˆë‹¤"

**ê·œì¹™ 2**: ë²ˆì—­ ê¸°ë¡ì€ ë°˜ë“œì‹œ í•œ ëª…ì˜ ì‚¬ìš©ìì—ê²Œ ì†í•œë‹¤.
- ëª¨ë“  ë²ˆì—­ì€ ëˆ„ê°€ ìš”ì²­í–ˆëŠ”ì§€ ê¸°ë¡ë¨
- ì˜ˆ: "ì´ ë²ˆì—­ ê¸°ë¡ì€ john@example.com ì‚¬ìš©ìì˜ ê²ƒì´ë‹¤"

---

## âœ… ì œì•½ ì¡°ê±´

> ì—”í‹°í‹°ê°€ ì§€ì¼œì•¼ í•˜ëŠ” ê·œì¹™

### í•„ìˆ˜ ê·œì¹™

1. **ì‹ë³„ì (ID)**ëŠ” ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ìƒì„±í•œë‹¤.
   - ì‚¬ìš©ìê°€ ì§ì ‘ ì„¤ì •í•  ìˆ˜ ì—†ìŒ

2. **ì´ë©”ì¼ (Email)**ì€ ì¤‘ë³µë  ìˆ˜ ì—†ë‹¤.
   - ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ë¡œëŠ” ê°€ì… ë¶ˆê°€
   - ì˜ˆ: "user@example.com"ìœ¼ë¡œ ì´ë¯¸ ê°€ì…ë˜ì–´ ìˆìœ¼ë©´ ë‹¤ì‹œ ê°€ì… ë¶ˆê°€

---

## ğŸ”„ ìƒëª…ì£¼ê¸°

> ì—”í‹°í‹°ê°€ ì–´ë–»ê²Œ ìƒì„±, ìˆ˜ì •, ì‚­ì œë˜ëŠ”ì§€

### ìƒì„± (ê°€ì…)

\`\`\`
ì‚¬ìš©ìê°€ ê°€ì…ì„ ìš”ì²­í•œë‹¤
    â†“
ì´ë©”ì¼ì´ ì¤‘ë³µë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•œë‹¤
    â†“
ëª¨ë“  í•„ìˆ˜ ì •ë³´ê°€ ì œê³µë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤
    â†“
ì‚¬ìš©ì ì—”í‹°í‹°ë¥¼ ìƒì„±í•œë‹¤
    â†“
ì‹ë³„ì(ID)ì™€ ê°€ì… ì‹œê°(CreatedAt)ì„ ìë™ìœ¼ë¡œ ì„¤ì •í•œë‹¤
\`\`\`

**ê·œì¹™**: ê°€ì… ì‹œ ì„ í˜¸ ì–¸ì–´ê°€ ì œê³µë˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ì€ 'ì˜ì–´'ë¡œ ì„¤ì •ëœë‹¤.

### ìˆ˜ì • (í”„ë¡œí•„ í¸ì§‘)

...

### ì‚­ì œ (íƒˆí‡´)

...
```

---

## ì‘ì„± ì›ì¹™

### âœ… ì¢‹ì€ ëª…ì„¸ (ì„œìˆ í˜•)

- "ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ ê°œì˜ ë²ˆì—­ ê¸°ë¡ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤."
- "ë²ˆì—­ ê¸°ë¡ì€ ë°˜ë“œì‹œ í•œ ëª…ì˜ ì‚¬ìš©ìì—ê²Œ ì†í•œë‹¤."
- "ì´ë©”ì¼ì€ ì¤‘ë³µë  ìˆ˜ ì—†ë‹¤."

### âŒ ë‚˜ìœ ëª…ì„¸ (ê¸°ìˆ ì )

- "User í…Œì´ë¸”ì˜ id ì»¬ëŸ¼ì€ UUID íƒ€ì…"
- "Translation.user_idëŠ” User.idë¥¼ ì°¸ì¡°í•˜ëŠ” Foreign Key"
- "email ì»¬ëŸ¼ì— UNIQUE ì œì•½"

â†’ **ë§ë¡œ ì„¤ëª…í•˜ê¸°!** í…Œì´ë¸”/ì»¬ëŸ¼ ì–¸ê¸‰ ê¸ˆì§€.

---

## ê´€ê³„ í‘œí˜„ íŒ¨í„´

### 1:N ê´€ê³„

```
"AëŠ” ì—¬ëŸ¬ ê°œì˜ Bë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤."
"BëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì˜ Aì— ì†í•œë‹¤."
```

**ì˜ˆì‹œ**:
- "ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ ê°œì˜ ë²ˆì—­ ê¸°ë¡ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤."
- "ë²ˆì—­ ê¸°ë¡ì€ ë°˜ë“œì‹œ í•œ ëª…ì˜ ì‚¬ìš©ìì—ê²Œ ì†í•œë‹¤."

### 1:1 ê´€ê³„

```
"AëŠ” í•˜ë‚˜ì˜ Bë¥¼ ê°€ì§„ë‹¤."
"BëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì˜ Aì— ì†í•œë‹¤."
```

**ì˜ˆì‹œ**:
- "ì‚¬ìš©ìëŠ” í•˜ë‚˜ì˜ í”„ë¡œí•„ì„ ê°€ì§„ë‹¤."
- "í”„ë¡œí•„ì€ ë°˜ë“œì‹œ í•œ ëª…ì˜ ì‚¬ìš©ìì—ê²Œ ì†í•œë‹¤."

### N:M ê´€ê³„

```
"AëŠ” ì—¬ëŸ¬ ê°œì˜ Bì™€ ì—°ê²°ë  ìˆ˜ ìˆë‹¤."
"BëŠ” ì—¬ëŸ¬ ê°œì˜ Aì™€ ì—°ê²°ë  ìˆ˜ ìˆë‹¤."
```

**ì˜ˆì‹œ**:
- "ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ ê°œì˜ ê´€ì‹¬ íƒœê·¸ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤."
- "íƒœê·¸ëŠ” ì—¬ëŸ¬ ëª…ì˜ ì‚¬ìš©ìì™€ ì—°ê²°ë  ìˆ˜ ìˆë‹¤."

### Cascade ê´€ê³„

```
"Aê°€ ì‚­ì œë˜ë©´ ëª¨ë“  Bë„ í•¨ê»˜ ì‚­ì œëœë‹¤."
```

**ì˜ˆì‹œ**:
- "ì‚¬ìš©ìê°€ ì‚­ì œë˜ë©´ ëª¨ë“  ë²ˆì—­ ê¸°ë¡ë„ í•¨ê»˜ ì‚­ì œëœë‹¤."

---

## ì œì•½ ì¡°ê±´ íŒ¨í„´

### í•„ìˆ˜/ì„ íƒ

```
"XëŠ” ë°˜ë“œì‹œ ì œê³µë˜ì–´ì•¼ í•œë‹¤."
"YëŠ” ì„ íƒ ì‚¬í•­ì´ë‹¤."
```

### ìœ ì¼ì„±

```
"XëŠ” ì¤‘ë³µë  ìˆ˜ ì—†ë‹¤."
```

### í˜•ì‹ ê²€ì¦

```
"XëŠ” ë°˜ë“œì‹œ Y í˜•ì‹ì´ì–´ì•¼ í•œë‹¤."
```

**ì˜ˆì‹œ**:
- "ì´ë©”ì¼ì€ ë°˜ë“œì‹œ ìœ íš¨í•œ í˜•ì‹ì´ì–´ì•¼ í•œë‹¤. (@ ê¸°í˜¸ í¬í•¨)"

### ê°’ ë²”ìœ„

```
"XëŠ” A, B, C ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•œë‹¤."
"YëŠ” ìµœì†Œ N ì´ìƒì´ì–´ì•¼ í•œë‹¤."
```

**ì˜ˆì‹œ**:
- "ì„ í˜¸ ì–¸ì–´ëŠ” 'í•œêµ­ì–´' ë˜ëŠ” 'ì˜ì–´'ë§Œ ê°€ëŠ¥í•˜ë‹¤."
- "í‘œì‹œ ì´ë¦„ì€ ìµœì†Œ 1ì ì´ìƒì´ì–´ì•¼ í•œë‹¤."

### ìë™ ìƒì„±

```
"XëŠ” ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ìƒì„±í•œë‹¤."
```

---

## ìƒëª…ì£¼ê¸° ì‘ì„± ê°€ì´ë“œ

### ìƒì„± (Create)

```
ìš”ì²­ìê°€ ìƒì„±ì„ ìš”ì²­í•œë‹¤
    â†“
[ê²€ì¦ ë‹¨ê³„ 1]
    â†“
[ê²€ì¦ ë‹¨ê³„ 2]
    â†“
ì—”í‹°í‹°ë¥¼ ìƒì„±í•œë‹¤
    â†“
[ìë™ ì„¤ì • ë‹¨ê³„]
```

### ìˆ˜ì • (Update)

```
ìš”ì²­ìê°€ ìˆ˜ì •ì„ ìš”ì²­í•œë‹¤
    â†“
ê¶Œí•œì„ í™•ì¸í•œë‹¤
    â†“
[ê²€ì¦ ë‹¨ê³„]
    â†“
ë³€ê²½ ê°€ëŠ¥í•œ í•„ë“œë§Œ ìˆ˜ì •í•œë‹¤
```

**ìˆ˜ì • ê°€ëŠ¥/ë¶ˆê°€ëŠ¥ í•„ë“œ ëª…ì‹œ í•„ìˆ˜**

### ì‚­ì œ (Delete)

```
ìš”ì²­ìê°€ ì‚­ì œë¥¼ ìš”ì²­í•œë‹¤
    â†“
ê¶Œí•œì„ í™•ì¸í•œë‹¤
    â†“
ì—°ê²°ëœ ë°ì´í„°ë¥¼ í™•ì¸í•œë‹¤
    â†“
[Cascade ì²˜ë¦¬]
    â†“
ì—”í‹°í‹°ë¥¼ ì‚­ì œí•œë‹¤
```

---

## ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

domain-model.md ì‘ì„± ì™„ë£Œ í›„:

- [ ] ìš©ì–´ í…Œì´ë¸”ì— ëª¨ë“  í•µì‹¬ ìš©ì–´ í¬í•¨
- [ ] ê° ìš©ì–´ì— ì •ì˜ì™€ ì˜ˆì‹œ ìˆìŒ
- [ ] ê´€ê³„ ê·œì¹™ì´ ì„œìˆ í˜•ìœ¼ë¡œ ì‘ì„±ë¨
- [ ] ëª¨ë“  ê´€ê³„ì— ì˜ˆì‹œ í¬í•¨
- [ ] ì œì•½ ì¡°ê±´ì— ì´ìœ  ì„¤ëª…
- [ ] ìƒëª…ì£¼ê¸° 3ë‹¨ê³„ (ìƒì„±/ìˆ˜ì •/ì‚­ì œ) ëª¨ë‘ í¬í•¨
- [ ] ê¸°ìˆ  ìš©ì–´ (í…Œì´ë¸”, ì»¬ëŸ¼, FK, UUID ë“±) 0ê°œ
- [ ] í•œê¸€ ìš©ì–´ ì‚¬ìš© (ì˜ì–´ ë³‘ê¸°ëŠ” ê´„í˜¸ ì•ˆì—)

---

## ê¸°ìˆ  ìš©ì–´ í•„í„°ë§

**ê¸ˆì§€ í‚¤ì›Œë“œ**:
```python
TECH_KEYWORDS = [
    # ë°ì´í„°ë² ì´ìŠ¤
    "í…Œì´ë¸”", "ì»¬ëŸ¼", "Foreign Key", "Primary Key", "Index",
    "UUID", "VARCHAR", "INT", "TIMESTAMP",

    # í”„ë ˆì„ì›Œí¬
    "FastAPI", "SQLAlchemy", "Alembic", "Pydantic",

    # í”„ë¡œí† ì½œ
    "HTTP", "REST", "GraphQL", "WebSocket",

    # ê¸°ìˆ  ìŠ¤íƒ
    "PostgreSQL", "MySQL", "Redis", "S3"
]
```

**ê²€ì¦**:
```python
def validate_no_tech_terms(content: str) -> bool:
    """ê¸°ìˆ  ìš©ì–´ê°€ ì—†ëŠ”ì§€ í™•ì¸"""
    lower_content = content.lower()
    for keyword in TECH_KEYWORDS:
        if keyword.lower() in lower_content:
            return False
    return True
```
