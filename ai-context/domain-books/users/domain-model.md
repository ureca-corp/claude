# users 도메인 모델

> 생성일: 2026-02-12
> Phase: 3 (Domain Modeler)
> 상태: ✅ 완료

---

## 📖 유비쿼터스 언어 (용어 정의)

> 이 도메인에서 사용하는 전용 용어들

### 핵심 용어

| 용어 | 정의 | 예시 |
|------|------|------|
| 사용자 (User) | 앱을 사용하는 개인 | "홍길동", "john@example.com" |
| 식별자 (ID) | 사용자를 고유하게 구분하는 값 | "u_123abc" |
| 이메일 (Email) | 소셜 로그인에서 받은 이메일 주소 | "user@example.com" |
| 표시 이름 (DisplayName) | 다른 사용자에게 보이는 닉네임 | "여행러버", "TravelLover" |
| 프로필 사진 (ProfileImage) | 사용자의 프로필 이미지 URL | "https://.../profile.jpg" |
| 선호 언어 (PreferredLanguage) | 사용자가 선호하는 번역 언어 | "ko" (한국어), "en" (영어) |

---

## 📐 관계 규칙

> 이 도메인의 엔티티들이 어떻게 연결되는지 서술형으로 정의

### 사용자와 번역 기록

**규칙 1**: 사용자는 여러 개의 번역 기록을 가질 수 있다.
**규칙 2**: 번역 기록은 반드시 한 명의 사용자에게 속한다.
**규칙 3**: 사용자가 탈퇴하면, 번역 기록은 유지되지만 사용자 정보는 익명화된다. (Soft Delete)

### 사용자와 미션

**규칙 4**: 사용자는 여러 개의 미션을 생성하고 진행할 수 있다.
**규칙 5**: 미션은 반드시 한 명의 사용자에게 속한다.
**규칙 6**: 사용자가 탈퇴하면, 미션 기록은 익명화된다.

### 사용자와 지도 기능

**규칙 7**: 사용자는 여러 개의 검색 기록을 가질 수 있다.
**규칙 8**: 사용자는 여러 개의 즐겨찾기 장소를 저장할 수 있다.
**규칙 9**: 검색 기록과 즐겨찾기는 사용자 탈퇴 시 완전히 삭제된다.

---

## 🔒 제약 조건

> 비즈니스 규칙과 제약사항

### 필수 필드

- **ID**: 시스템이 자동으로 생성 (사용자가 직접 지정할 수 없음)
- **Email**: 소셜 로그인 시 필수로 제공되어야 함
- **PreferredLanguage**: 기본값은 "en" (영어)

### 권한 규칙

**규칙 10**: 프로필 수정은 본인만 가능하다.
**규칙 11**: 관리자는 프로필을 수정할 수 없다. (사용자 프라이버시 보호)

### 유일성 제약

- **Email**: 동일한 이메일로 여러 계정을 만들 수 없다.

---

## 🎯 생명주기

### 생성

1. 사용자가 Google 또는 Apple 소셜 로그인을 시도한다.
2. 시스템은 Email이 이미 존재하는지 확인한다.
3. 존재하지 않으면 새 User를 생성하고 ID를 부여한다.
4. PreferredLanguage는 기본값 "en"으로 설정된다.

### 수정

1. 사용자는 자신의 DisplayName, ProfileImage, PreferredLanguage를 수정할 수 있다.
2. Email과 ID는 변경할 수 없다.

### 탈퇴 (Soft Delete)

1. 사용자가 탈퇴를 요청한다.
2. 시스템은 User를 비활성화한다. (Status = "Deleted")
3. Email, DisplayName을 익명화한다. (예: "deleted_user_123")
4. 번역 기록, 미션 기록은 보관하지만 사용자 정보는 보이지 않는다.
5. 검색 기록과 즐겨찾기는 완전히 삭제한다.

---

**users 도메인 완료** ✅
