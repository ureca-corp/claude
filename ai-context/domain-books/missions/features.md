# missions 도메인 기능 정의

## 기능 1: 미션 시작

**설명**: 사용자가 택시, 결제, 체크인 중 하나의 미션 카드를 선택하여 새로운 미션을 시작합니다. 미션 타입에 맞는 3-7개의 단계가 자동으로 생성됩니다.

**사용자 시나리오**:
1. 사용자가 홈 화면에서 "택시" 미션 카드를 선택합니다.
2. 시스템은 택시 미션을 생성하고 3개의 단계("목적지 설정", "택시 호출", "운전자에게 목적지 전달")를 준비합니다.
3. 현재 진행중인 미션이 있으면 먼저 완료하라는 안내가 표시됩니다.
4. 미션이 시작되면 1단계부터 가이드가 표시됩니다.

**관련 API**:
- 미션 시작 (api-spec.md 참조)

---

## 기능 2: 단계별 진행

**설명**: 사용자는 가이드 탭에서 현재 단계의 체크리스트를 확인하고, "다음 단계" 또는 "이전 단계" 버튼으로 진행할 수 있습니다.

**사용자 시나리오**:
1. 사용자가 택시 미션 1단계("목적지 설정")를 확인합니다.
2. 지도에서 목적지를 설정한 후 "다음 단계" 버튼을 누릅니다.
3. 2단계("택시 호출")로 이동하고, 해당 단계의 가이드가 표시됩니다.
4. 필요하면 "이전 단계" 버튼으로 1단계로 돌아갈 수 있습니다.

**관련 API**:
- 미션 단계 변경 (api-spec.md 참조)

---

## 기능 3: 미션 완료

**설명**: 사용자가 모든 단계를 완료한 후 "미션 종료" 버튼을 누르면, 미션 결과(해결/부분해결/미해결)를 선택하여 미션을 완료합니다.

**사용자 시나리오**:
1. 사용자가 택시 미션의 마지막 단계까지 진행합니다.
2. "미션 종료" 버튼을 누르면 결과 선택 팝업이 표시됩니다.
3. "해결" 버튼을 선택하면 미션이 완료되고 기록이 저장됩니다.
4. 홈 화면으로 돌아가면 "진행중인 미션 없음" 상태가 됩니다.

**관련 API**:
- 미션 완료 (api-spec.md 참조)

---

## 기능 4: 진행중 미션 조회

**설명**: 사용자가 앱을 재실행하거나 다른 기기에서 접속해도 진행중인 미션을 이어서 진행할 수 있습니다. 서버에 실시간으로 동기화됩니다.

**사용자 시나리오**:
1. 사용자가 택시 미션 2단계까지 진행하고 앱을 종료합니다.
2. 나중에 앱을 다시 실행하면 홈 화면에 "진행중인 택시 미션(2/3 단계)" 배지가 표시됩니다.
3. 가이드 탭을 열면 2단계부터 이어서 진행할 수 있습니다.

**관련 API**:
- 진행중 미션 조회 (api-spec.md 참조)

---

## 기능 5: 미션 취소

**설명**: 사용자는 진행중인 미션을 취소할 수 있습니다. 취소된 미션은 기록으로 보관되지만 더 이상 진행할 수 없습니다.

**사용자 시나리오**:
1. 사용자가 결제 미션을 시작했지만 현금 결제로 해결했습니다.
2. 가이드 탭에서 "미션 취소" 버튼을 누릅니다.
3. 확인 팝업에서 "취소" 버튼을 누르면 미션이 취소됩니다.
4. 새로운 미션을 시작할 수 있습니다.

**관련 API**:
- 미션 완료 (status를 "Cancelled"로 설정, api-spec.md 참조)

---

## 기능 6: 미션별 추천 문장 활용

**설명**: 각 미션 타입에 맞는 추천 문장이 자동으로 제공되어, 사용자가 빠르게 번역 없이 의사소통할 수 있습니다.

**사용자 시나리오**:
1. 사용자가 택시 미션 3단계("운전자에게 목적지 전달")에 도달합니다.
2. 화면 하단에 "여기서 내려주세요", "얼마예요?" 등의 추천 문장 카드가 표시됩니다.
3. 사용자가 "여기서 내려주세요" 카드를 누르면 큰 글씨로 한/영 텍스트가 표시됩니다.
4. "읽어주기" 버튼으로 미리 녹음된 음성을 재생할 수 있습니다.

**관련 API**:
- phrases 도메인의 추천 문장 조회 API 참조
