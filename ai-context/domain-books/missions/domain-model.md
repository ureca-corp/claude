# missions 도메인 모델

> 생성일: 2026-02-12
> Phase: 3 (Domain Modeler)
> 상태: ✅ 완료

---

## 📖 유비쿼터스 언어 (용어 정의)

> 이 도메인에서 사용하는 전용 용어들

### 핵심 용어

| 용어 | 정의 | 예시 |
|------|------|------|
| 미션 (Mission) | 사용자가 진행하는 작업 단위 | 택시 타기, 결제하기, 체크인하기 |
| 식별자 (ID) | 미션을 고유하게 구분하는 값 | "m_abc123" |
| 사용자 ID (UserID) | 이 미션을 진행하는 사용자의 식별자 | "u_123abc" |
| 미션 타입 (Type) | 미션의 종류 | "택시", "결제", "체크인" |
| 진행 상태 (Status) | 미션의 현재 상태 | "진행중", "완료", "취소" |
| 현재 단계 (CurrentStep) | 미션의 현재 진행 단계 번호 | 1, 2, 3, ... |
| 완료 결과 (Result) | 미션 완료 시 결과 | "해결", "부분해결", "미해결" |
| 단계 (Step) | 미션의 체크리스트 항목 | "목적지 설정", "택시 호출", ... |

---

## 📐 관계 규칙

> 이 도메인의 엔티티들이 어떻게 연결되는지 서술형으로 정의

### 미션과 사용자

**규칙 1**: 미션은 반드시 한 명의 사용자에게 속한다.
**규칙 2**: 사용자는 여러 개의 미션을 동시에 또는 순차적으로 진행할 수 있다.
**규칙 3**: 하지만 "진행중" 상태의 미션은 한 번에 하나만 가능하다.

### 미션과 단계

**규칙 4**: 미션은 3~7개의 단계(Step)를 가진다.
**규칙 5**: 단계는 별도 Step 엔티티로 관리된다.
**규칙 6**: 단계는 순서대로 진행되어야 한다. (1단계 → 2단계 → ...)

### 미션과 번역

**규칙 7**: 미션은 여러 개의 번역 기록을 포함할 수 있다.
**규칙 8**: 번역은 미션에 속할 수도 있고, 독립적일 수도 있다.

### 미션과 추천 문장

**규칙 9**: 미션 타입에 따라 미리 정의된 추천 문장(Phrase)이 제공된다.
**규칙 10**: 택시 미션은 택시용 추천 문장, 결제 미션은 결제용 추천 문장을 사용한다.

---

## 🔒 제약 조건

> 비즈니스 규칙과 제약사항

### 필수 필드

- **ID**: 시스템이 자동으로 생성
- **UserID**: 미션을 진행하는 사용자 (필수)
- **Type**: 미션 타입 (택시/결제/체크인 중 하나)
- **Status**: 진행 상태 (기본값: "진행중")
- **CurrentStep**: 현재 단계 (기본값: 1)

### 선택 필드

- **Result**: 미션 완료 시에만 설정 (해결/부분해결/미해결)

### 미션 타입 제약

**규칙 11**: 초기 버전은 3종류만 지원한다. (택시, 결제, 체크인)
**규칙 12**: 향후 미션 타입은 확장 가능하다.

### 동시 진행 제약

**규칙 13**: 사용자는 한 번에 하나의 미션만 "진행중" 상태로 가질 수 있다.
**규칙 14**: 새 미션을 시작하려면 이전 미션을 먼저 완료해야 한다.

### 서버 동기화

**규칙 15**: 미션 진행 상태는 서버에 실시간으로 동기화된다.
**규칙 16**: 여러 기기에서 미션을 이어서 진행할 수 있다.

---

## 🎯 생명주기

### 생성

1. 사용자가 미션 카드(택시/결제/체크인)를 선택한다.
2. 시스템은 현재 "진행중" 미션이 있는지 확인한다.
3. 진행중 미션이 없으면 새 Mission을 생성한다.
   - Type: 선택한 미션 타입
   - Status: "진행중"
   - CurrentStep: 1
4. 미션 타입에 맞는 Step 엔티티들을 생성한다. (3~7개)
5. 서버에 동기화한다.

### 진행

1. 사용자는 가이드 탭에서 현재 단계의 체크리스트를 확인한다.
2. "다음 단계" 버튼을 누르면 CurrentStep이 증가한다.
3. "이전 단계" 버튼을 누르면 CurrentStep이 감소한다.
4. 각 단계에서 번역 기능을 사용할 수 있다.
5. 단계 변경은 서버에 즉시 동기화된다.

### 완료

1. 사용자가 "미션 종료" 버튼을 누른다.
2. 시스템은 결과 선택 팝업을 표시한다. (해결/부분해결/미해결)
3. 사용자가 결과를 선택한다.
4. Mission의 Status를 "완료"로, Result를 선택한 값으로 변경한다.
5. "진행중인 미션 없음" 상태로 되돌린다.
6. 서버에 동기화한다.

### 취소

**규칙 17**: 사용자는 진행중 미션을 취소할 수 있다.
**규칙 18**: 취소된 미션은 Status가 "취소"로 변경되고 기록은 보관된다.

---

**missions 도메인 완료** ✅
