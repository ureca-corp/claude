# phrases 도메인 모델

> 생성일: 2026-02-12
> Phase: 3 (Domain Modeler)
> 상태: ✅ 완료

---

## 📖 유비쿼터스 언어 (용어 정의)

> 이 도메인에서 사용하는 전용 용어들

### 핵심 용어

| 용어 | 정의 | 예시 |
|------|------|------|
| 추천 문장 (Phrase) | 미리 준비된 번역 문장 템플릿 | "카드 되나요?", "영수증 주세요" |
| 식별자 (ID) | 추천 문장을 고유하게 구분하는 값 | "p_abc123" |
| 미션 타입 (MissionType) | 이 문장이 속한 미션의 종류 | "택시", "결제", "체크인" |
| 한국어 텍스트 (KoreanText) | 한국어로 미리 저장된 문장 | "여기서 내려주세요" |
| 영어 텍스트 (EnglishText) | 영어로 미리 저장된 번역 | "Please drop me off here" |
| 분류 태그 (Category) | 문장의 용도나 상황 분류 | "인사", "요청", "질문" |
| 음성 URL (AudioUrl) | 미리 생성된 TTS 음성 파일 경로 | "https://storage.../phrase_123.mp3" |

---

## 📐 관계 규칙

> 이 도메인의 엔티티들이 어떻게 연결되는지 서술형으로 정의

### 추천 문장과 미션 타입

**규칙 1**: 추천 문장은 미션 타입별로 그룹화된다.
**규칙 2**: 택시 미션은 택시용 추천 문장만 보여준다.
**규칙 3**: 결제 미션은 결제용 추천 문장만 보여준다.
**규칙 4**: 체크인 미션은 체크인용 추천 문장만 보여준다.

### 추천 문장과 미션

**규칙 5**: 미션은 해당 타입의 추천 문장 3-5개를 참조한다.
**규칙 6**: 추천 문장은 여러 미션에서 재사용된다. (템플릿)

### 추천 문장과 번역

**규칙 7**: 사용자가 추천 문장 카드를 누르면, 미리 저장된 번역과 음성이 즉시 제공된다.
**규칙 8**: 추천 문장 사용은 새로운 Translation 기록을 생성하지 않는다. (선택 사항)

---

## 🔒 제약 조건

> 비즈니스 규칙과 제약사항

### 필수 필드

- **ID**: 시스템이 자동으로 생성
- **MissionType**: 택시/결제/체크인 중 하나
- **KoreanText**: 한국어 문장 (필수)
- **EnglishText**: 영어 번역 (필수)

### 선택 필드

- **Category**: 분류 태그 (선택)
- **AudioUrl**: TTS 음성 파일 (미리 생성하면 성능 향상)

### 관리 권한

**규칙 9**: 추천 문장은 관리자만 추가/수정/삭제할 수 있다.
**규칙 10**: 일반 사용자는 추천 문장을 조회만 가능하다.

### 미션 타입당 수량

**규칙 11**: 각 미션 타입당 3-5개의 추천 문장을 제공한다.
**규칙 12**: 향후 추천 문장은 단계별로 세분화할 수 있다.

### 다국어 처리

**규칙 13**: 한국어와 영어는 미리 DB에 저장한다.
**규칙 14**: 향후 다른 언어 지원 시 실시간 번역 API를 사용한다.

---

## 🎯 생명주기

### 생성 (관리자만)

1. 관리자가 새 추천 문장을 작성한다.
   - MissionType 선택 (택시/결제/체크인)
   - KoreanText 입력
   - EnglishText 입력
   - Category 설정 (선택)
2. 시스템은 TTS API로 음성 파일을 미리 생성한다.
3. 음성 파일을 Cloud Storage에 업로드하고 URL을 받는다.
4. Phrase를 저장한다.

### 조회 (사용자)

1. 사용자가 미션을 시작한다. (예: 택시)
2. 시스템은 택시 타입의 추천 문장 3-5개를 조회한다.
3. 사용자는 추천 문장 카드 목록을 본다.
4. 사용자가 카드를 누르면:
   - 큰 글씨로 한/영 텍스트 표시
   - "읽어주기" 버튼 → AudioUrl 재생
   - "복사" 버튼 → 클립보드 복사

### 수정 (관리자만)

**규칙 15**: 추천 문장은 수정 가능하다.
**규칙 16**: 수정 시 TTS 음성 파일도 재생성한다.

### 삭제 (관리자만)

**규칙 17**: 추천 문장은 삭제 가능하다.
**규칙 18**: 삭제 시 연결된 음성 파일도 함께 삭제한다.

---

## 📋 추천 문장 예시

### 택시 미션 (3-5개)

| KoreanText | EnglishText | Category |
|------------|-------------|----------|
| 여기서 내려주세요 | Please drop me off here | 요청 |
| 얼마예요? | How much is it? | 질문 |
| 영수증 주세요 | Receipt, please | 요청 |

### 결제 미션 (3-5개)

| KoreanText | EnglishText | Category |
|------------|-------------|----------|
| 카드 되나요? | Do you accept cards? | 질문 |
| 현금으로 할게요 | I'll pay with cash | 요청 |
| 영수증 주세요 | Receipt, please | 요청 |

### 체크인 미션 (3-5개)

| KoreanText | EnglishText | Category |
|------------|-------------|----------|
| 체크인하려고 하는데요 | I'd like to check in | 요청 |
| 예약 확인 부탁드려요 | Can you confirm my reservation? | 질문 |
| 방 열쇠 주세요 | Room key, please | 요청 |

---

**phrases 도메인 완료** ✅
